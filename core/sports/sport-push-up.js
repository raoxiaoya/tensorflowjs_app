var e=require("../../@babel/runtime/helpers/classCallCheck"),t=require("../../@babel/runtime/helpers/createClass"),l=require("../../@babel/runtime/helpers/possibleConstructorReturn"),r=require("../../@babel/runtime/helpers/get"),a=require("../../@babel/runtime/helpers/getPrototypeOf"),n=require("../../@babel/runtime/helpers/inherits");var s=require("../../utils/utils"),c=require("./sport-base"),i=require("../body-calc/calculator"),o=function(o){function u(t){var r,n,s,c;return e(this,u),n=this,c=[t],s=a(s=u),(r=l(n,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){return!1}}()?Reflect.construct(s,c||[],a(n).constructor):s.apply(n,c)))._calculator=null,r.rules=null,r.stateTran=-1,r.view="side",r.tickMode=!0,r._calculator=new i,r._calculator.pointThreshold=r.pointThreshold,r.rules={},r.buildRules(),r}return n(u,c),t(u,[{key:"start",value:function(){r(a(u.prototype),"start",this).call(this),this._calculator.pointThreshold=this.pointThreshold}},{key:"buildRules",value:function(){this.rules.basePose={name:"全身需入镜",calc:"whole"},this.rules.liePose={name:"卧状态检查",calc:"$and",rules:[{name:"躯干卧倒状态",calc:"lie",offset:30},{name:"手臂弯曲检查",calc:"$or",rules:[{name:"左手臂弯曲状态",calc:"match-angle",angleKey:"left_elbow",secondKey:"left_shoulder",thirdKey:"left_wrist",angle:115,offset:15},{name:"右手臂弯曲状态",calc:"match-angle",angleKey:"right_elbow",secondKey:"right_shoulder",thirdKey:"right_wrist",angle:115,offset:15}]},{name:"手臂与腰齐平查",calc:"$or",rules:[{name:"左手臂与腰齐平查",calc:"match-angle",angleKey:"left_shoulder",secondKey:"left_elbow",thirdKey:"left_hip",angle:35,offset:15},{name:"右手臂与腰齐平查",calc:"match-angle",angleKey:"right_shoulder",secondKey:"right_elbow",thirdKey:"right_hip",angle:35,offset:15}]}]},this.rules.upPose={name:"撑状态检查",calc:"$and",rules:[{name:"手臂垂直撑起",calc:"$or",rules:[{name:"左手臂垂直",calc:"vertical",upperKey:"left_shoulder",centerKey:"left_elbow",lowerKey:"left_wrist",offset:20},{name:"右手臂垂直",calc:"vertical",upperKey:"right_shoulder",centerKey:"right_elbow",lowerKey:"right_wrist",offset:20}]},{name:"手臂与腰部垂直",calc:"$or",rules:[{name:"左手臂与腰齐垂直",calc:"match-angle",angleKey:"left_shoulder",secondKey:"left_elbow",thirdKey:"left_hip",angle:90,offset:25},{name:"右手臂与腰齐垂直",calc:"match-angle",angleKey:"right_shoulder",secondKey:"right_elbow",thirdKey:"right_hip",angle:90,offset:25}]},{name:"腿部绷直",calc:"$or",rules:[{name:"左腿绷直",calc:"match-angle",angleKey:"left_knee",secondKey:"left_ankle",thirdKey:"left_hip",angle:160,offset:20},{name:"右腿绷直",calc:"match-angle",angleKey:"right_knee",secondKey:"right_ankle",thirdKey:"rgight_hip",angle:160,offset:20}]}]}}},{key:"pushing",value:function(e){this.isCounting&&!s.isNone(e)&&(this._calculator.calculating(e,this.rules.liePose)?this.stateTran=1:this._calculator.calculating(e,this.rules.upPose)&&1===this.stateTran&&(this.stateTran=-1,this.countTimes(),this.emitTick()))}}])}();o.KEY="Push-Up",o.NAME="俯卧撑",module.exports=o;