var e=require("../../@babel/runtime/helpers/classCallCheck"),t=require("../../@babel/runtime/helpers/createClass"),l=require("../../@babel/runtime/helpers/possibleConstructorReturn"),r=require("../../@babel/runtime/helpers/get"),s=require("../../@babel/runtime/helpers/getPrototypeOf"),a=require("../../@babel/runtime/helpers/inherits");var h=require("../../utils/utils"),i=require("./sport-base"),n=require("../body-calc/calculator"),o=function(o){function u(t){var r,a,h,i;return e(this,u),a=this,i=[t],h=s(h=u),(r=l(a,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){return!1}}()?Reflect.construct(h,i||[],s(a).constructor):h.apply(a,i))).threshold=30,r.rules=null,r._calculator=null,r.view="side",r.tickMode=!0,r._calculator=new n,r._calculator.pointThreshold=r.pointThreshold,r._posture=!1,r.rules={ruleThreshold:r.threshold,stand:{name:"站立",calc:"$and",rules:[{name:"全身进入图像范围内检查",calc:"whole"},{name:"站立",calc:"stand"}]}},r}return a(u,i),t(u,[{key:"start",value:function(){r(s(u.prototype),"start",this).call(this),this._calculator.pointThreshold=this.pointThreshold}},{key:"buildRules",value:function(){if(!this.rules.squat||this.rules.ruleThreshold!==this.threshold){var e={name:"深蹲姿势检查",calc:"$and",rules:[{name:"全身进入图像范围内检查",calc:"whole"},{name:"手臂180度检测",calc:"$or",rules:[{name:"左手180度伸直",calc:"match-angle",angleKey:"left_elbow",secondKey:"left_shoulder",thirdKey:"left_wrist",angle:180,offset:this.threshold},{name:"右手180度伸直",calc:"match-angle",angleKey:"right_elbow",secondKey:"right_shoulder",thirdKey:"right_wrist",angle:180,offset:this.threshold}]},{name:"腋下夹角90度检测",calc:"$or",rules:[{name:"左腋90度",calc:"match-angle",angleKey:"left_shoulder",secondKey:"left_elbow",thirdKey:"left_hip",angle:90,offset:this.threshold},{name:"右腋90度",calc:"match-angle",angleKey:"right_shoulder",secondKey:"right_elbow",thirdKey:"right_hip",angle:90,offset:this.threshold}]},{name:"腿部下蹲检查",calc:"$or",rules:[{name:"左腿90度",calc:"match-angle",angleKey:"left_hip",secondKey:"left_shoulder",thirdKey:"left_knee",angle:80,offset:this.threshold},{name:"右腿90度",calc:"match-angle",angleKey:"right_hip",secondKey:"right_shoulder",thirdKey:"right_knee",angle:80,offset:this.threshold}]}]};this.rules.squat=e,this.rules.ruleThreshold=this.threshold}}},{key:"pushing",value:function(e){if(this.isCounting&&!h.isNone(e)){var t=null;if(this._calculator.calculating(e,this.rules.stand))return t=!1,void(this._posture=!1);this.buildRules(),this._calculator.calculating(e,this.rules.squat)&&(t=!0),null!==t&&(!0===t&&!1===this._posture&&(this.countTimes(),this.emitTick()),this._posture=t)}}}])}();o.KEY="Squat",o.NAME="深蹲起",module.exports=o;