var e=require("../../@babel/runtime/helpers/classCallCheck"),t=require("../../@babel/runtime/helpers/createClass"),l=require("../../@babel/runtime/helpers/possibleConstructorReturn"),r=require("../../@babel/runtime/helpers/get"),s=require("../../@babel/runtime/helpers/getPrototypeOf"),h=require("../../@babel/runtime/helpers/inherits");var i=require("../../utils/utils"),a=require("./sport-base"),o=require("../body-calc/calculator"),n=function(n){function c(t){var r,h,i,a;return e(this,c),h=this,a=[t],i=s(i=c),(r=l(h,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){return!1}}()?Reflect.construct(i,a||[],s(h).constructor):i.apply(h,a))).threshold=30,r.rules=null,r._calculator=null,r.view="side",r.tickMode=!1,r._calculator=new o,r._calculator.pointThreshold=r.pointThreshold,r.rules={ruleThreshold:r.threshold},r}return h(c,a),t(c,[{key:"start",value:function(){r(s(c.prototype),"start",this).call(this),this._calculator.pointThreshold=this.pointThreshold}},{key:"buildRules",value:function(){if(!this.rules.pose||this.rules.ruleThreshold!==this.threshold){var e={name:"马步蹲姿势检查",calc:"$and",rules:[{name:"全身进入图像范围内检查",calc:"whole"},{name:"脚90度检测",calc:"$or",rules:[{name:"左脚90度弯曲",calc:"match-angle",angleKey:"left_knee",secondKey:"left_hip",thirdKey:"left_ankle",angle:90,offset:this.threshold},{name:"右脚90度弯曲",calc:"match-angle",angleKey:"right_knee",secondKey:"right_hip",thirdKey:"right_ankle",angle:90,offset:this.threshold}]},{name:"手臂180度检测",calc:"$or",rules:[{name:"左手180度伸直",calc:"match-angle",angleKey:"left_elbow",secondKey:"left_shoulder",thirdKey:"left_wrist",angle:180,offset:this.threshold},{name:"右手180度伸直",calc:"match-angle",angleKey:"right_elbow",secondKey:"right_shoulder",thirdKey:"right_wrist",angle:180,offset:this.threshold}]},{name:"腋下夹角90度检测",calc:"$or",rules:[{name:"左腋90度",calc:"match-angle",angleKey:"left_shoulder",secondKey:"left_elbow",thirdKey:"left_hip",angle:90,offset:this.threshold},{name:"右腋90度",calc:"match-angle",angleKey:"right_shoulder",secondKey:"right_elbow",thirdKey:"right_hip",angle:90,offset:this.threshold}]}]};this.rules.pose=e,this.rules.ruleThreshold=this.threshold}}},{key:"pushing",value:function(e){this.isCounting&&(i.isNone(e)?this.pauseTime():(this.buildRules(),this._calculator.calculating(e,this.rules.pose)?(console.log("蹲马步中..."),this.tickTime()):this.pauseTime()))}}])}();n.KEY="Squat-Horse",n.NAME="马步蹲",module.exports=n;