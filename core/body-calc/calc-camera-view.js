var e=require("../../@babel/runtime/helpers/possibleConstructorReturn"),t=require("../../@babel/runtime/helpers/getPrototypeOf"),r=require("../../@babel/runtime/helpers/inherits"),i=require("../../@babel/runtime/helpers/createClass"),n=require("../../@babel/runtime/helpers/classCallCheck");var o=require("../../utils/utils"),a=require("../saber"),c=require("./calc-base"),u=require("../body-detection-result"),s=i((function e(){n(this,e),this.name="正对摄像头名称",this.calc="camera-view",this.position="front"})),l=function(s){function l(r){var i,a,c,u;if(n(this,l),o.isNone(r))throw new Error("calculator不能为空。");return a=this,c=t(c=l),(i=e(a,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){return!1}}()?Reflect.construct(c,u||[],t(a).constructor):c.apply(a,u)))._calculator=null,i._calculator=r,i}return r(l,c),i(l,[{key:"isViewName",value:function(e){var t=new u(e.keypoints,e.width,e.height,e.score);t.keypoints=o.clone(t.keypoints),t.rotateToUpright();var r=this.findPoint(t.keypoints,"left_shoulder",!0),i=this.findPoint(t.keypoints,"right_shoulder",!0),n=this.findPoint(t.keypoints,"nose",!0);if(!r||!i||!n)return a.writeConsoleDebug("camera-view","未找到肩膀和鼻子关键点，请确认识别结果"),null;var c=Math.min(r.x,i.x),s=Math.max(r.x,i.x);return n.x>=c&&n.x<=s?r.x>i.x?"front":"back":n.x>=s?"right":"left"}},{key:"judging",value:function(e,t){if(!t||"camera-view"!=t.calc)throw new Error("规则为空，或者配置的不是视角检查规则");o.isNone(t.position)&&(t.position="front");try{var r=this.isViewName(e),i=r===t.position;return i||a.writeConsoleDebug("视角不匹配，要求视角是：".concat(t.position,"，当前视角是：").concat(r)),i}catch(e){return console.warn("calc-camera-view",e),!1}}}])}();module.exports={CalcRuleCameraView:s,CalcCameraView:l};