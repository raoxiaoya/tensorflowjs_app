var e=require("../../@babel/runtime/helpers/classCallCheck"),t=require("../../@babel/runtime/helpers/createClass"),r=require("../../utils/utils"),i=require("../body-detection-result"),s=require("./calc-camera-view").CalcCameraView,n=require("./calc-lie").CalcLie,l=require("./calc-stand").CalcStand,a=require("./calc-base"),c=[{center:"left_shoulder",first:"nose",second:"left_hip",summary:"头部相对左肩的偏移角度"},{center:"right_shoulder",first:"nose",second:"right_hip",summary:"头部相对右肩的偏移角度"},{center:"right_shoulder",first:"right_hip",second:"left_shoulder",summary:"上身矩形右上角"},{center:"left_shoulder",first:"left_hip",second:"right_shoulder",summary:"上身矩形左上角"},{center:"right_hip",first:"right_shoulder",second:"left_hip",summary:"下身矩形右下角"},{center:"right_hip",first:"right_shoulder",second:"right_knee",summary:"右弯腰度数"},{center:"left_hip",first:"left_shoulder",second:"left_knee",summary:"左弯腰度数"},{center:"left_hip",first:"left_shoulder",second:"right_hip",summary:"下身矩形左下角"},{center:"left_elbow",first:"left_shoulder",second:"left_wrist",summary:"左上肢弯曲度"},{center:"right_elbow",first:"right_shoulder",second:"right_wrist",summary:"右上肢弯曲度"},{center:"left_shoulder",first:"left_hip",second:"left_wrist",summary:"左上肢与躯干偏移角度"},{center:"right_shoulder",first:"right_hip",second:"right_wrist",summary:"右上肢与躯干偏移角度"},{center:"left_knee",first:"left_hip",second:"left_ankle",summary:"左下肢弯曲度"},{center:"right_knee",first:"right_hip",second:"right_ankle",summary:"右下肢弯曲度"},{center:"left_hip",first:"right_ankle",second:"left_ankle",summary:"左下肢开度角度"},{center:"right_hip",first:"left_ankle",second:"right_ankle",summary:"右下肢开度角度"}],h=function(){return t((function t(i){if(e(this,t),this._calcBase=null,this._keypoints=null,this.basicPosture=null,this.view=null,this.angleMap=[],r.isNone(i))throw new Error("请传入人体识别结果或关键点数组");this._keypoints=i instanceof Array?i:i.keypoints,this._calcBase=new a,this.judgeBasic(),this.buildAngles()}),[{key:"judgeView",value:function(){var e=new i(this._keypoints,720,1280),t=new s;this.view=t.isViewName(e)}},{key:"judgeBasic",value:function(){var e=new l;e.isStanding(this._keypoints,25)?this.basicPosture="stand":(e=new n).isLie(this._keypoints,25)&&(this.basicPosture="lie")}},{key:"buildAngles",value:function(){var e=this,t=this._calcBase;this.angleMap=c.map((function(r){try{var i=t.findPoint(e._keypoints,r.center),s=t.findPoint(e._keypoints,r.first),n=t.findPoint(e._keypoints,r.second);return{key:"".concat(r.center,"+").concat(r.first,"+").concat(r.second),angle:t.angle(i,s,n),summary:r.summary}}catch(e){console.warn("limbs-map",e)}}))}}])}();module.exports=h;